{"version":3,"sources":["../../src/services/StudentService.js"],"names":["StudentService","Student","findAll","students","map","category","StudentSerializer","toResource","ErrorResponse","message","params","create","newStudent","studentID","findByPk","student","Error","getISICCard","createISICCard","isicCard","ISICCardSerializer"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;IAEMA,c;;;;;;;;;;;;;;;;uBAGuBC,oBAAQC,OAAR,E;;;AAAjBC,gBAAAA,Q;iDAECA,QAAQ,CAACC,GAAT,CAAa,UAACC,QAAD;AAAA,yBAAcC,8BAAkBC,UAAlB,CAA6BF,QAA7B,CAAd;AAAA,iBAAb,C;;;;;sBAED,IAAIG,yBAAJ,CAAkB,YAAMC,OAAxB,EAAiC,GAAjC,C;;;;;;;;;;;;;;;;;;;2HAIiBC,M;;;;;;;;uBAEET,oBAAQU,MAAR,CAAeD,MAAf,C;;;AAAnBE,gBAAAA,U;kDAECN,8BAAkBC,UAAlB,CAA6BK,UAA7B,C;;;;;sBAED,IAAIJ,yBAAJ,CAAkB,aAAMC,OAAxB,EAAiC,GAAjC,C;;;;;;;;;;;;;;;;;;;4HAIkBI,S,EAAWH,M;;;;;;;;uBAEbT,oBAAQa,QAAR,CAAiBD,SAAjB,C;;;AAAhBE,gBAAAA,O;;oBAEDA,O;;;;;sBACG,IAAIC,KAAJ,CAAU,mBAAV,C;;;qBAGJD,OAAO,CAACE,WAAR,E;;;;;sBACI,IAAID,KAAJ,CAAU,kCAAV,C;;;;uBAGeD,OAAO,CAACG,cAAR,CAAuBR,MAAvB,C;;;AAAjBS,gBAAAA,Q;kDAECC,+BAAmBb,UAAnB,CAA8BY,QAA9B,C;;;;;sBAED,IAAIX,yBAAJ,CAAkB,aAAMC,OAAxB,EAAiC,GAAjC,C;;;;;;;;;;;;;;;;;;;;eAKGT,c","sourcesContent":["import Student from '../models/Student';\nimport StudentSerializer from '../serializers/StudentSerializer';\nimport ISICCardSerializer from '../serializers/ISICCardSerializer';\nimport ErrorResponse from '../responses/ErrorResponse';\n\nclass StudentService {\n  static async findAll() {\n    try {\n      const students = await Student.findAll();\n\n      return students.map((category) => StudentSerializer.toResource(category));\n    } catch (error) {\n      throw new ErrorResponse(error.message, 422);\n    }\n  }\n\n  static async createStudent(params) {\n    try {\n      const newStudent = await Student.create(params);\n\n      return StudentSerializer.toResource(newStudent);\n    } catch (error) {\n      throw new ErrorResponse(error.message, 422);\n    }\n  }\n\n  static async createISICCard(studentID, params) {\n    try {\n      const student = await Student.findByPk(studentID);\n\n      if (!student) {\n        throw new Error('Student Not Found');\n      }\n\n      if (student.getISICCard()) {\n        throw new Error('Student already has an ISIC Card');\n      }\n\n      const isicCard = await student.createISICCard(params);\n\n      return ISICCardSerializer.toResource(isicCard);\n    } catch (error) {\n      throw new ErrorResponse(error.message, 422);\n    }\n  }\n}\n\nexport default StudentService;\n"],"file":"StudentService.js"}